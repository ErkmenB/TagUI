

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Usage &mdash; TagUI 6.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="TagUI Chrome Extension" href="tools.html" />
    <link rel="prev" title="Download and Setup" href="setup.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> TagUI
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Download and Setup</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#running-flows-with-options">Running flows with options</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-flows-as-desktop-icons">Running flows as desktop icons</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-log-files-for-debugging">Create log files for debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-flows-on-a-fixed-schedule">Running flows on a fixed schedule</a></li>
<li class="toctree-l2"><a class="reference internal" href="#writing-non-english-flows">Writing non-English flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-visual-automation-in-flows">Using visual automation in flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="#writing-python-within-flows">Writing Python within flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="#writing-r-within-flows">Writing R within flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-erina-the-command-line-assistant">Using Erina, the command line assistant</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sample-flows">Sample flows</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id71">)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">TagUI Chrome Extension</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html#tagui-writer-screenshoter-editor">TagUI Writer, Screenshoter &amp; Editor</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html#tagui-for-python">TagUI For Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">TagUI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Usage</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/usage.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h1>
<div class="section" id="running-flows-with-options">
<h2>Running flows with options<a class="headerlink" href="#running-flows-with-options" title="Permalink to this headline">¶</a></h2>
<p>You can use the below options when running <code class="docutils literal notranslate"><span class="pre">tagui</span></code>.</p>
<p>For example, <code class="docutils literal notranslate"><span class="pre">tagui</span> <span class="pre">my_flow.tag</span> <span class="pre">headless</span> <span class="pre">report</span></code> runs <code class="docutils literal notranslate"><span class="pre">my_flow.tag</span></code> without showing the web browser, while storing the flow run result in <code class="docutils literal notranslate"><span class="pre">tagui_report.csv</span></code>.</p>
<dl class="simple">
<dt>headless</dt><dd><p>Runs the flow without a visible browser (does not work for visual automation).</p>
</dd>
<dt>report</dt><dd><p>Tracks flow run result in <code class="docutils literal notranslate"><span class="pre">tagui/src/tagui_report.csv</span></code> and saves html log of automation execution.</p>
</dd>
<dt>my_datatable.csv</dt><dd><p>Uses the specified csv file as the datatable for batch automation of many records.</p>
</dd>
<dt>speed</dt><dd><p>Runs a datatable flow, skipping the default 3s delay and restarting of Chrome between datatable iterations.</p>
</dd>
</dl>
<p>See <a class="reference internal" href="dep_options.html"><span class="doc">other deprecated options</span></a>.</p>
</div>
<div class="section" id="running-flows-as-desktop-icons">
<h2>Running flows as desktop icons<a class="headerlink" href="#running-flows-as-desktop-icons" title="Permalink to this headline">¶</a></h2>
<p>To do that on Windows, create a .cmd or .bat file with contents like the following, which goes to the directory where you want to run the automation, and run tagui command on the file with your specified options. Double-clicking the .cmd or .bat file will start automation.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@echo</span> <span class="n">off</span>
<span class="n">c</span><span class="p">:</span>
<span class="n">cd</span> <span class="n">c</span><span class="p">:</span>\<span class="n">folder</span>
<span class="n">tagui</span> <span class="n">filename</span> <span class="n">quiet</span> <span class="n">speed</span> <span class="n">chrome</span>
</pre></div>
</div>
<p>To do that on macOS / Linux, create a file with contents like the following, which goes to the directory where you want to run the automation, and run tagui command on the file with your specified options. You will need to use the command chmod 700 on the file to give it execute permissions, so that it can be run by double-clicking on it.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">username</span><span class="o">/</span><span class="n">folder</span>
<span class="n">tagui</span> <span class="n">filename</span> <span class="n">quiet</span> <span class="n">speed</span> <span class="n">chrome</span>
</pre></div>
</div>
</div>
<div class="section" id="create-log-files-for-debugging">
<h2>Create log files for debugging<a class="headerlink" href="#create-log-files-for-debugging" title="Permalink to this headline">¶</a></h2>
<p>To create log files create an empty file <cite>tagui_logging</cite> in tagui/src folder.</p>
<p>After each automation run, a .log file will be created to store output of the execution, a .js file is the generated JavaScript file, a .raw is the expanded flow after reading in any module sub-scripts that are called in that flow.</p>
</div>
<div class="section" id="running-flows-on-a-fixed-schedule">
<h2>Running flows on a fixed schedule<a class="headerlink" href="#running-flows-on-a-fixed-schedule" title="Permalink to this headline">¶</a></h2>
<p>To schedule an automation flow with crontab (for macOS/Linux), for example at 8am daily</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">0</span> <span class="mi">8</span> <span class="o">*</span> <span class="o">*</span> <span class="o">*</span> <span class="o">/</span><span class="n">full_path</span><span class="o">/</span><span class="n">tagui</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">tagui</span> <span class="n">flow_filename</span> <span class="n">option</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
<p>For Windows, use Task Scheduler (search schedule from Start Menu) or something like [Z-Cron](<a class="reference external" href="https://www.z-cron.com">https://www.z-cron.com</a>)</p>
</div>
<div class="section" id="writing-non-english-flows">
<h2>Writing non-English flows<a class="headerlink" href="#writing-non-english-flows" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/kelaberetiv/TagUI/issues/68#issuecomment-344380657">You can write TagUI flows non-English TagUI flows</a>.</p>
<ol class="arabic simple">
<li><p>Set your default flow language with [tagui_language variable](<a class="reference external" href="https://github.com/kelaberetiv/TagUI/blob/master/src/tagui_config.txt">https://github.com/kelaberetiv/TagUI/blob/master/src/tagui_config.txt</a>) in tagui_config.txt</p></li>
<li><p>Write automation flow in human language base on [language definition .csv files](<a class="reference external" href="https://github.com/kelaberetiv/TagUI/tree/master/src/languages">https://github.com/kelaberetiv/TagUI/tree/master/src/languages</a>)</p></li>
<li><p>Optionally set tagui_language in flow to any other languages as output language</p></li>
</ol>
<p><strong>Tip</strong> - as Windows Unicode support isn’t as straightforward as macOS/Linux, doing this in Windows may require changing system locale, using chcp command, and selecting a font to display native language correctly ([more info](<a class="reference external" href="http://www.walkernews.net/2013/05/19/how-to-get-windows-command-prompt-displays-chinese-characters/">http://www.walkernews.net/2013/05/19/how-to-get-windows-command-prompt-displays-chinese-characters/</a>))</p>
<p>TagUI language engine supports over 20 languages and can be modified or extended easily by users to improve accuracy or add more languages. The languages are Bengali, Chinese, English, French, German, Hindi, Hungarian, Indonesian, Italian, Japanese, Korean, Polish, Portuguese, Romanian, Russian, Serbian, Spanish, Tagalog, Tamil, Thai, Vietnamese. This starting set is partly chosen base on the [list of most commonly used languages](<a class="reference external" href="https://www.babbel.com/en/magazine/the-10-most-spoken-languages-in-the-world">https://www.babbel.com/en/magazine/the-10-most-spoken-languages-in-the-world</a>), partly from the countries around where I’m from (Singapore), and partly from countries with a lot of developers.</p>
<p>If your native language isn’t in the above list, you can also automate building a new human language definition by using this language [build automation flow](<a class="reference external" href="https://github.com/kelaberetiv/TagUI/blob/master/src/languages/build">https://github.com/kelaberetiv/TagUI/blob/master/src/languages/build</a>) (src/languages/build) that self-builds the vocabulary set using Google Translate. To do that, update [build.csv](<a class="reference external" href="https://github.com/kelaberetiv/TagUI/blob/master/src/languages/build.csv">https://github.com/kelaberetiv/TagUI/blob/master/src/languages/build.csv</a>) with the languages that you want to build and run <cite>tagui build using chrome</cite> in src/languages folder. Use quiet option to hide the verbose automation output. The generated files are named as their 2-character language codes to prevent overwriting existing language definitions by accident. To use the generated .csv files, rename them to their full language names. See [full list of languages possible](<a class="reference external" href="https://cloud.google.com/translate/docs/languages">https://cloud.google.com/translate/docs/languages</a>) to be generated by Google Translate.</p>
<p>Most of the language definitions are automatically self-built using Google Translate (except english.csv, chinese.csv, japanese.csv, german.csv, french.csv which have been vetted). Native language users can update the language definition csv themselves and are invited to submit PRs with correct words to be used. Some languages are very different from English structure (for eg written from right to left) and would be impossible to use correctly in TagUI.</p>
</div>
<div class="section" id="using-visual-automation-in-flows">
<h2>Using visual automation in flows<a class="headerlink" href="#using-visual-automation-in-flows" title="Permalink to this headline">¶</a></h2>
<p>TagUI has built-in integration with [SikuliX (base on OpenCV)](<a class="reference external" href="http://sikulix.com">http://sikulix.com</a>) to allow visually identifying the web elements and desktop UI (user interface) elements for interaction by providing their images or (x,y) coordinates. Applicable steps are click, hover, type, select, read, show, save, snap, keyboard, mouse. To use visual automation, OpenJDK v8 (64-bit) or later is needed.</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Check that [OpenJDK (64-bit)](<a class="reference external" href="https://aws.amazon.com/corretto">https://aws.amazon.com/corretto</a>) is installed (entering <cite>java -version</cite> returns your Java version)</p></li>
<li><p>After Java is installed, you will have to restart your command prompt or terminal to use it</p></li>
<li><p>On Windows, set display magnification to recommended %, if it doesn’t work then 100%</p></li>
<li><p>On Windows, if TagUI just hangs there, see if it’s due to [this issue and try the solution](<a class="reference external" href="https://github.com/kelaberetiv/TagUI/issues/229">https://github.com/kelaberetiv/TagUI/issues/229</a>)</p></li>
<li><p>On macOS, if can’t find image on screen, may be due to [how the image was captured](<a class="reference external" href="https://github.com/kelaberetiv/TagUI/issues/240#issuecomment-405030276">https://github.com/kelaberetiv/TagUI/issues/240#issuecomment-405030276</a>)</p></li>
<li><p>On Linux, requires installing and setting up dependencies by [following this guide](<a class="reference external" href="https://sikulix-2014.readthedocs.io/en/latest/newslinux.html#version-1-1-4-special-for-linux-people">https://sikulix-2014.readthedocs.io/en/latest/newslinux.html#version-1-1-4-special-for-linux-people</a>)</p></li>
</ol>
</div></blockquote>
<p><strong>Tip</strong> - the first time visual automation is run, the SikuliX engine will need to initialise Jython. Run again to use.</p>
<p>To use visual automation, simply specify an image (in .png or .bmp format) to visually look for in place of the element identifier. Relative paths are supported for image filenames (eg pc.png, images/button.bmp). Note that the element that corresponds to the image must be visible on the screen for visual automation to succeed. If it’s blocked by another window for example, the automation will be unable to find the element.</p>
<p>Alternatively, you can specify the (x,y) coordinates of the element that you want to interact with.</p>
<p>![Sample Visual Automation](<a class="reference external" href="https://raw.githubusercontent.com/tebelorg/Tump/master/visual_flow.gif">https://raw.githubusercontent.com/tebelorg/Tump/master/visual_flow.gif</a>)</p>
<p>To type onto the screen instead of a particular element, use <cite>keyboard text</cite> or <cite>keyboard [modifiers]text</cite> ([examples](<a class="reference external" href="https://github.com/kelaberetiv/TagUI/issues/370">https://github.com/kelaberetiv/TagUI/issues/370</a>)). To do a snapshot or an OCR of the whole screen, use <cite>page.png</cite> or <cite>page.bmp</cite> as the element identifier for steps snap / read. The usual helper functions visible() / present() can also be used to check whether an image is visible on the screen.</p>
<p>The keyboard and mouse steps, as well as helper functions mouse_xy(), mouse_x(), mouse_y(), can be used to do complex UI interactions. A screen (real or Xvfb) is needed for visual automation. [Tesseract OCR](<a class="reference external" href="https://github.com/tesseract-ocr/tesseract">https://github.com/tesseract-ocr/tesseract</a>) (optical character recognition) is used for visually retrieving text. Also, by using vision step, you can send [custom SikuliX commands](<a class="reference external" href="http://sikulix-2014.readthedocs.io/en/latest/genindex.html">http://sikulix-2014.readthedocs.io/en/latest/genindex.html</a>) to do things that are not covered by TagUI.</p>
<p>Transparency (0% opacity) is supported in .png images, for eg using an image of an UI element with transparent background to enable clicking on an UI element that appears on different backgrounds on different occasions.</p>
<p>Another example is an image of the window or frame (PDF viewer, MS Word, textbox etc) with the center content of the image set as transparent. This allows using read, show, save, snap steps to perform OCR and save snapshots for application windows, containers, frames, textboxes with varying content. Also for these steps, (x1,y1)-(x2,y2) can be used as the identifier to define the region of interest on the screen to perform OCR or capture snapshot.</p>
</div>
<div class="section" id="writing-python-within-flows">
<h2>Writing Python within flows<a class="headerlink" href="#writing-python-within-flows" title="Permalink to this headline">¶</a></h2>
<p>TagUI has built-in integration with Python (works out of the box for both v2 &amp; v3) - a programming language with many popular frameworks for big data and machine learning. The py step can be used to run commands in Python and retrieve the output of those commands. To use Python integration in TagUI, first [download Python for your OS](<a class="reference external" href="https://www.python.org/">https://www.python.org/</a>). macOS and Linux normally come pre-installed with Python. Make sure that python command is accessible from command prompt.</p>
<dl>
<dt>&lt;details&gt;</dt><dd><dl class="simple">
<dt>&lt;summary&gt;</dt><dd><p>Click to show how to use py step in your automation flow to send and receive data from Python frameworks</p>
</dd>
</dl>
<p>&lt;/summary&gt;</p>
</dd>
</dl>
<p>In your automation flow, use the py step followed by the Python commands to be executed, separated by <cite>;</cite>. You can then use the <cite>print</cite> command in Python to output the result you want to be accessible in your automation flow as <cite>py_result</cite> variable. If the result is JSON data, the JSON object <cite>py_json</cite> will be created for easy access to JSON data elements. If not, <cite>py_json</cite> will be null.</p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a>`
// using py step to denote Python code, and getting back output from py_result
py a=1;b=2
py c=a+b
py print(c)
echo py_result</p>
<p>// alternatively, you can use py begin and py finish to denote a Python code block
// indentation of Python code is also supported, for example in conditions or loops
py begin
a=1;b=2
c=a+b
print(c)
py finish
echo py_result</p>
<p>// an example of passing dynamically generated variables to Python integration
phone = 1234567
name = ‘donald duck’
py_step(‘phone = ‘ + phone)
py_step(‘name = “’ + name + ‘”’)</p>
<p>py print(name)
echo py_result
py print(phone)
echo py_result
<a href="#id3"><span class="problematic" id="id4">``</span></a><a href="#id5"><span class="problematic" id="id6">`</span></a></p>
<p><strong>Tip</strong> - you can also use the <cite>execfile()</cite> command in Python v2.X to run Python scripts. Or use <cite>exec(open(‘filename’).read())</cite> in Python v3.X to run Python scripts</p>
<p>&lt;/details&gt;</p>
</div>
<div class="section" id="writing-r-within-flows">
<h2>Writing R within flows<a class="headerlink" href="#writing-r-within-flows" title="Permalink to this headline">¶</a></h2>
<p>TagUI has built-in integration with R - an open-source software environment for statistical computing and graphics. R can be used for big data and machine learning. The r step can be used to run commands in R and retrieve the output of those commands. To use R integration in TagUI, first [download R software for your OS](<a class="reference external" href="https://www.r-project.org/">https://www.r-project.org/</a>). Make sure that Rscript command is accessible from your command prompt (added to path or symbolically linked).</p>
<p>In your automation flow, use the r step followed by the R commands to be executed, separated by <cite>;</cite>. You can then use the <cite>cat()</cite> command in R to output the result you want to be accessible in your automation flow as <cite>r_result</cite> variable. If the result is JSON data, the JSON object <cite>r_json</cite> will be created for easy access to JSON data elements. If not, <cite>r_json</cite> will be null.</p>
<p><a href="#id7"><span class="problematic" id="id8">``</span></a>`
// using r step to denote R code, and getting back output from r_result
r a=1;b=2
r c=a+b
r cat(c)
echo r_result</p>
<p>// alternatively, you can use r begin and r finish to denote a R code block
r begin
a=1;b=2
c=a+b
cat(c)
r finish
echo r_result</p>
<p>// an example of passing dynamically generated variables to R integration
phone = 1234567
name = ‘donald duck’
r_step(‘phone = ‘ + phone)
r_step(‘name = “’ + name + ‘”’)</p>
<p>r cat(name)
echo r_result
r cat(phone)
echo r_result</p>
<p><a href="#id9"><span class="problematic" id="id10">``</span></a><a href="#id11"><span class="problematic" id="id12">`</span></a></p>
<p><strong>Tip</strong> - you can also use the <cite>source()</cite> command in R to run R scripts</p>
</div>
<div class="section" id="using-erina-the-command-line-assistant">
<h2>Using Erina, the command line assistant<a class="headerlink" href="#using-erina-the-command-line-assistant" title="Permalink to this headline">¶</a></h2>
<p>TagUI scripts are already in natural-language-like syntax to convert to JavaScript code. What’s even better is having natural-language-like syntax on the command line. Instead of typing <cite>tagui download_bank_report june creditcard</cite> to run the automation flow download_bank_report with parameters june creditcard, you can type <cite>erina download my june creditcard bank report</cite>. For a demo of the CLI (command-line interface) assistant in action, [see this video](<a class="reference external" href="https://www.youtube.com/watch?v=Sm4WNQ89gRA">https://www.youtube.com/watch?v=Sm4WNQ89gRA</a>).</p>
<p>The commands erina (macOS/Linux) and erina.cmd (Windows) can be renamed to any other names you like. The commands can be set up in the same way as the tagui / tagui.cmd above to be accessible from any folder. The command basically interprets this general syntax <cite>erina single-word-action fillers options/parameters fillers single-or-multi-word-context</cite> to call run the corresponding automation flow <cite>action_context</cite> with <cite>options/parameters</cite>.</p>
<p>Also, adding <cite>using chrome</cite> / <cite>using headless</cite> / <cite>using firefox</cite> at the end will let it run using the respective browsers. The default location where automation flows are searched for is in tagui/flows folder and can be set in tagui_helper.php. Filler words (is, are, was, were, my, me) are ignored as they don’t convey useful info. [More details here](<a class="reference external" href="https://github.com/kelaberetiv/TagUI/issues/44#issuecomment-321108786">https://github.com/kelaberetiv/TagUI/issues/44#issuecomment-321108786</a>).</p>
</div>
<div class="section" id="sample-flows">
<h2>Sample flows<a class="headerlink" href="#sample-flows" title="Permalink to this headline">¶</a></h2>
<p>TagUI includes the following automation flow samples ([tagui/src/samples folder](<a class="reference external" href="https://github.com/kelaberetiv/TagUI/tree/master/src/samples">https://github.com/kelaberetiv/TagUI/tree/master/src/samples</a>))</p>
<p>Flow Sample <a href="#id72"><span class="problematic" id="id73">|Purpose
:-----------|</span></a>:——
[1_yahoo](<a class="reference external" href="https://github.com/kelaberetiv/TagUI/blob/master/src/samples/1_yahoo">https://github.com/kelaberetiv/TagUI/blob/master/src/samples/1_yahoo</a>)|searches github on Yahoo and captures screenshot of results
[2_twitter](<a class="reference external" href="https://github.com/kelaberetiv/TagUI/blob/master/src/samples/2_twitter">https://github.com/kelaberetiv/TagUI/blob/master/src/samples/2_twitter</a>)|goes to a Twitter page and saves some profile information
[3_github](<a class="reference external" href="https://github.com/kelaberetiv/TagUI/blob/master/src/samples/3_github">https://github.com/kelaberetiv/TagUI/blob/master/src/samples/3_github</a>)|goes to a GitHub page and downloads the repository file
[4_conditions](<a class="reference external" href="https://github.com/kelaberetiv/TagUI/blob/master/src/samples/4_conditions">https://github.com/kelaberetiv/TagUI/blob/master/src/samples/4_conditions</a>)|goes through examples of using conditions in natural language
[5_repositories](<a class="reference external" href="https://github.com/kelaberetiv/TagUI/blob/master/src/samples/5_repositories">https://github.com/kelaberetiv/TagUI/blob/master/src/samples/5_repositories</a>)|shows using repositories on Russian social media site VK.com
[6_datatables](<a class="reference external" href="https://github.com/kelaberetiv/TagUI/tree/master/src/samples/6_datatables">https://github.com/kelaberetiv/TagUI/tree/master/src/samples/6_datatables</a>)|set of flows uses datatables to retrieve and act on GitHub info
[7_testing](<a class="reference external" href="https://github.com/kelaberetiv/TagUI/blob/master/src/samples/7_testing">https://github.com/kelaberetiv/TagUI/blob/master/src/samples/7_testing</a>)|shows how to use check step assertions for CI/CD integration
[8_hastebin](<a class="reference external" href="https://github.com/kelaberetiv/TagUI/blob/master/src/samples/8_hastebin">https://github.com/kelaberetiv/TagUI/blob/master/src/samples/8_hastebin</a>)|used by upload option to upload flow result to hastebin.com
[9_misc](<a class="reference external" href="https://github.com/kelaberetiv/TagUI/blob/master/src/samples/9_misc">https://github.com/kelaberetiv/TagUI/blob/master/src/samples/9_misc</a>)|shows how to use steps popup, frame, dom, js, { and } block
[a_facedetect](<a class="reference external" href="https://github.com/kelaberetiv/TagUI/blob/master/src/samples/a_facedetect">https://github.com/kelaberetiv/TagUI/blob/master/src/samples/a_facedetect</a>)|uses face recognition to detect profile images on webpages
[b_visualoutlook](<a class="reference external" href="https://github.com/kelaberetiv/TagUI/issues/113#issuecomment-378194245">https://github.com/kelaberetiv/TagUI/issues/113#issuecomment-378194245</a>)|uses visual recognition for desktop MS Outlook email sending
[c_chineseflow](<a class="reference external" href="https://github.com/kelaberetiv/TagUI/blob/master/src/samples/c_chineseflow">https://github.com/kelaberetiv/TagUI/blob/master/src/samples/c_chineseflow</a>)|run flow in other languages (first, change src/tagui_config.txt)</p>
<p># Cheat Sheet
### AUTOMATION WORKFLOW
- What happens behind the scenes when you run an automation flow (TagUI architecture diagram)</p>
<p>![TagUI Flowchart](<a class="reference external" href="https://raw.githubusercontent.com/kelaberetiv/TagUI/master/src/media/flowchart.png">https://raw.githubusercontent.com/kelaberetiv/TagUI/master/src/media/flowchart.png</a>)</p>
<p>### FIND XPATH OF WEB ELEMENT
- In Chrome browser, right-click on the element, click Inspect, right-click on HTML code block, then</p>
<p>![TagUI Flowchart](<a class="reference external" href="https://raw.githubusercontent.com/kelaberetiv/TagUI/master/src/media/find_xpath.png">https://raw.githubusercontent.com/kelaberetiv/TagUI/master/src/media/find_xpath.png</a>)</p>
<p>### STEPS DESCRIPTION
- TagUI will auto-wait for an UI element to appear and interacts with it as soon as it appears
- Element identifier can be auto-recorded using TagUI Chrome extension, or [found from web browser](<a class="reference external" href="https://github.com/kelaberetiv/TagUI#find-xpath-of-web-element">https://github.com/kelaberetiv/TagUI#find-xpath-of-web-element</a>)
- TagUI auto-selects provided identifier in this order - xpath, css, id, name, class, title, aria-label, text(), href</p>
<p>Basic Step|Parameters (separator in bold)|Purpose
:———<a href="#id74"><span class="problematic" id="id75">|:-----------------------------|</span></a>:——
http(s)://<a href="#id76"><span class="problematic" id="id77">|just enter full url of webpage (\`variable\` for variable)|go to specified webpage
click|element to click|click on an element
rclick|element to right-click|right-click on an element
dclick|element to double-click|double-click on an element
hover|element to hover|move cursor to element
type|element ***as*** text ([enter] = enter, [clear] = clear field)|enter element as text
select|element to select ***as*** option value ([clear] = clear selection)|choose dropdown option
read|element to read (page = webpage) ***to*** variable name|fetch element text to variable
show|element to read (page = webpage, ie raw html) |print element text to output
save|element (page = webpage) ***to*** optional filename|save element text to file
snap|element (page = webpage) ***to*** optional filename|save screenshot to file
snap (pdf)|page ***to*** filename.pdf (headless Chrome / PhantomJS)|save webpage to basic pdf
load|filename ***to*** variable name|load file content to variable
echo|text (in quotation marks) and variables|print text/variables to output
dump|text (in quotation marks) and variables ***to*** optional filename|save text/variables to file
write|text (in quotation marks) and variables ***to*** optional filename|append text/variables to file
variable_name|</span></a> = value (for text, put in quotes, use + to concat)|define variable variable_name
// (on new line)|user comments (ignored during execution)|add user comments
ask|question or instruction for user (reply stored in ask_result)|ask user for input
live|try steps or code interactively for Chrome / visual automation|enter live mode ([Firefox not yet](<a class="reference external" href="https://github.com/laurentj/slimerjs/issues/639">https://github.com/laurentj/slimerjs/issues/639</a>))</p>
<p><strong>Tip</strong> - to use variables where text is expected, `variable` can be used. XPath is an expressive way to identify web elements. If you know xpath and use xpath for element identifier, use double quotes for text //*[&#64;title=”Login”]</p>
<p>&lt;details&gt;
&lt;summary&gt;</p>
<blockquote>
<div><p>Click to show pro steps - tagui, keyboard, mouse, table, wait, check, upload, api, run, dom, js, r, py, vision, timeout</p>
</div></blockquote>
<p>&lt;/summary&gt;</p>
<p>Pro Step|Parameters (separator in bold)|Purpose
:——-<a href="#id78"><span class="problematic" id="id79">|:-----------------------------|</span></a>:——
tagui|relative or absolute filename (see MODULES section)|run another tagui flow
keyboard|keystrokes and modifiers (using visual automation)|send keystrokes to screen
mouse|down or up (using sikuli visual automation)|send mouse event to screen
table|element (XPath selector only) <strong>*to*</strong> optional filename.csv|save basic html table to csv
wait|optional time in seconds (default is 5 seconds)|explicitly wait for some time
check|condition <strong>&amp;#124;</strong> text (in quotes) if true <strong>&amp;#124;</strong> text (in quotes) if false|check condition and print result
upload|element (CSS selector only) <strong>*as*</strong> filename to upload|upload file to website
download|url to download <strong>*to*</strong> filename to save|download from url to file
receive|url keyword to watch <strong>*to*</strong> filename to save|receive resource to file
frame|frame name <strong>&amp;#124;</strong> subframe name if any|next step or block in frame/subframe
popup|url keyword of new tab window to look for|next step or block in new tab window
{ and }|use { to start block and } to end block (on new line)|define block of steps and code
api|full url (including parameters) of api call|call api &amp; save response to api_result
run|OS shell command including parameters|run OS command &amp; save to run_result
dom|javascript code for document object model|run code in dom &amp; save to dom_result
js|javascript statements (skip auto-detection)|treat as JS code explicitly
r|R statements for big data and machine learning|run R statements &amp; save to r_result
py|python code for big data and machine learning|run python code &amp; save to py_result
vision|custom visual automation commands|run custom sikuli commands
timeout|time in seconds before step errors out|change auto-wait timeout</p>
<p>For headless and visible Chrome, file downloads can be done using normal webpage interaction or by specifying the URL as a navigation flow step. For Firefox and PhantomJS, the download and receive step can be used. Note that on Windows, snap step requires display magnification to be set at 100% to work properly.</p>
<p>As TagUI default execution context is local, to run javascript on webpage dom (eg document.querySelector) use dom step. Set dom_json variable to pass a variable for use in dom step. Or dom_json = {tmp_number: phone, tmp_text: name} to pass multiple variables for use in dom step (dom_json.tmp_number and dom_json.tmp_text).</p>
<p>&lt;/details&gt;</p>
<p>### CONDITIONS EXAMPLES
&lt;details&gt;
&lt;summary&gt;</p>
<blockquote>
<div><p>Click to show how conditions and loops can be expressed in natural language or JavaScript</p>
</div></blockquote>
<p>&lt;/summary&gt;</p>
<ul class="simple">
<li><p>Write text in quotation marks (either ” or ‘ works) to differentiate text from variable names</p></li>
<li><p>{ and } block is required after for loop (while is deprecated - no auto-wait, hangs CasperJS)</p></li>
<li><p>Use for loop to repeat blocks of steps (nested loops, conditions, break, continue supported)</p></li>
</ul>
<p>Condition (in natural language)|JavaScript
:——————————<a href="#id80"><span class="problematic" id="id81">|:---------
example - if day equals to &quot;Friday&quot;|</span></a> if (day == “Friday”)
example - if menu contains “fruits”| if (menu.indexOf(“fruits”)&gt;-1)
example - if A more than B and C not equals to D | if ((A &gt; B) &amp;&amp; (C != D))
example - for n from 1 to 4 | for (n=1; n&lt;=4; n++)]
example - for n from 1 to infinity | for (n=1; n&lt;=1024; n++)]
example - while cupcakes equal to 12| while (cupcakes == 12)
contain|.indexOf(“text”)&gt;-1
not contain|.indexOf(“text”)&lt;0
equal to|==
not equal to|!=
more than / greater than / higher than|&gt;
more than or equal to / greater than or equal to / higher than or equal to|&gt;=
less than / lesser than / lower than|&lt;
less than or equal to / lesser than or equal to / lower than or equal to|&lt;=
and|&amp;&amp;
or|&amp;#124;&amp;#124;</p>
<p>Use { and } step to define step/code blocks for powerful repetitive automation with for loop. The usual break and continue commands can be used on next line after an if condition, to break out of the immediate loop or continue to the next iteration. To loop ‘indefinitely’ use <cite>for n from 1 to infinity</cite>, where infinity is a pre-defined variable at 1024.</p>
<p>When using contain / equal, you can write with or without s behind. You can use if present(‘element’) to check if the element exists, before doing the step on next line. Other useful functions include visible(‘element’), count(‘element’), url(), title(), text(), timer(), which can be used in conditions and steps such as check or echo.</p>
<p>&lt;/details&gt;</p>
<p>### HELPER FUNCTIONS
&lt;details&gt;
&lt;summary&gt;</p>
<blockquote>
<div><p>Click to show csv_row(), present(), visible(), count(), clipboard(), url(), title(), text(), timer(), mouse_xy() functions</p>
</div></blockquote>
<p>&lt;/summary&gt;</p>
<ul class="simple">
<li><p>Below are helper functions which can be used in your steps or code like a variable</p></li>
<li><p>You can define your own JS functions in tagui_local.js / tagui_global.js ([see eg](<a class="reference external" href="https://github.com/kelaberetiv/TagUI/issues/236#issuecomment-403188526">https://github.com/kelaberetiv/TagUI/issues/236#issuecomment-403188526</a>))</p></li>
<li><p>TagUI will look for a local function file tagui_local.js in the same folder of flow</p></li>
<li><p>TagUI will also look for a global function file tagui_global.js in tagui/src folder</p></li>
<li><p>Local definitions take precedence over global definitions (same for repositories)</p></li>
</ul>
<p>Function|Purpose
:——-<a href="#id13"><span class="problematic" id="id14">|</span></a>:——
csv_row(row_array)|return formatted string for writing to csv file, eg using write step
present(‘element’)|return true or false whether element identifier specified is present
visible(‘element’)|return true or false whether element identifier specified is visible
count(‘element’)|return number of elements matching element identifier specified
clipboard(‘text’)|put text to clipboard (eg to paste text quickly with keyboard step)
clipboard()|return clipboard text (eg to access text copied with keyboard step)
url()|return page url of current web page
title()|return page title of current web page
text()|return text content of current web page
timer()|return time elapsed in sec between calls
mouse_xy()|return (x,y) coordinates as string, for eg ‘(200,400)’
mouse_x()|return x coordinate as integer number, for eg 200
mouse_y()|return y coordinate as integer number, for eg 200</p>
<p>csv_row() is useful for organising lots of data gathered during automation to be written into csv output file -</p>
<p><a href="#id15"><span class="problematic" id="id16">``</span></a><a href="#id17"><span class="problematic" id="id18">`</span></a></p>
<p>// example of using csv_row() function to save data as CSV file
read name_element to name
read price_element to price
read details_element to details
item_info = [name, price, details]
write csv_row(item_info) to product_list.csv</p>
<p><a href="#id19"><span class="problematic" id="id20">``</span></a><a href="#id21"><span class="problematic" id="id22">`</span></a></p>
<p>clipboard() is useful for accessing text on the clipboard or putting text there (for eg to paste text quickly) -</p>
<p><a href="#id23"><span class="problematic" id="id24">``</span></a><a href="#id25"><span class="problematic" id="id26">`</span></a></p>
<p>// example of using clipboard() to retrieve text contents from PDF file
dclick pdf_document.png
wait 3 seconds
keyboard [ctrl]a
keyboard [ctrl]c
text_contents = clipboard()</p>
<p>// example of using clipboard(‘text’) to type text quickly by pasting it
text_to_type = ‘long string of text to be entered into UI element’
click my_life_story_textbox
js clipboard(text_to_type) or clipboard(text_to_type);
keyboard [ctrl]v</p>
<p><a href="#id27"><span class="problematic" id="id28">``</span></a><a href="#id29"><span class="problematic" id="id30">`</span></a></p>
<p>mouse_xy(), mouse_x(), mouse_y() require visual automation and can be used to interact with UI (user-interface) elements on the screen by specifying their (x,y) coordinates, for eg below clicking to the right of an UI element by 200 pixels -</p>
<p><a href="#id31"><span class="problematic" id="id32">``</span></a><a href="#id33"><span class="problematic" id="id34">`</span></a></p>
<p>// example of using mouse_xy(), mouse_x(), mouse_y() functions
hover element.png
echo mouse_xy()
x = mouse_x() + 200
y = mouse_y()
click (<cite>x</cite>,`y`)</p>
<p><a href="#id35"><span class="problematic" id="id36">``</span></a><a href="#id37"><span class="problematic" id="id38">`</span></a></p>
<p>&lt;/details&gt;</p>
<p>### MODULES
&lt;details&gt;
&lt;summary&gt;</p>
<blockquote>
<div><p>Click to show how you can use tagui step to call other TagUI automation flows within an automation flow file</p>
</div></blockquote>
<p>&lt;/summary&gt;</p>
<ul class="simple">
<li><p>You can reuse and combine automation scripts to automate complex flows</p></li>
<li><p>Sub-scripts can be multiple levels deep and be of any filename or extension</p></li>
<li><p>To call sub-scripts, use tagui step followed by absolute or relative filename</p></li>
<li><p>For example, tagui login_crm or tagui crm.login or tagui outlooksendmail</p></li>
<li><p>Variables can be directly used or modified in parent script and sub-scripts</p></li>
</ul>
<p>The tagui step works by expanding content of a sub-script into the parent script, at the line where tagui step is used to call the sub-script. Thus variables that are accessible from the parent flow file will also be accessible from the sub-script. A .raw file will be created to store expanded contents of the automation flow (useful for checking error messages).</p>
<p>&lt;/details&gt;</p>
<p>### REPOSITORIES
&lt;details&gt;
&lt;summary&gt;</p>
<blockquote>
<div><p>Click to show how you can use repositories csv to make objects reusable and improve readability</p>
</div></blockquote>
<p>&lt;/summary&gt;</p>
<ul class="simple">
<li><p>Repository csv files have 2 columns, for example below (headers up to you to name)</p></li>
<li><p>TagUI will look for a local repository file tagui_local.csv in the same folder of flow</p></li>
<li><p>TagUI will also look for a global repository file tagui_global.csv in tagui/src folder</p></li>
<li><p>Using `object` in your flow replaces it with its definition (which can contain objects)</p></li>
<li><p>For example, `type email` becomes type user-email-textbox as <a class="reference external" href="mailto:user&#37;&#52;&#48;gmail&#46;com">user<span>&#64;</span>gmail<span>&#46;</span>com</a></p></li>
</ul>
<p>OBJECT|DEFINITION
:—–<a href="#id39"><span class="problematic" id="id40">|</span></a>:———
email|user-email-textbox
create account|btn btn–green btn-xl signup-btn
type email|type `email` as <a class="reference external" href="mailto:user&#37;&#52;&#48;gmail&#46;com">user<span>&#64;</span>gmail<span>&#46;</span>com</a></p>
<p>&lt;/details&gt;</p>
<p>### DATATABLES
&lt;details&gt;
&lt;summary&gt;</p>
<blockquote>
<div><p>Click to show how datatable csv files can be used to perform batch automation at scale</p>
</div></blockquote>
<p>&lt;/summary&gt;</p>
<ul class="simple">
<li><p>When running TagUI, specify the csv file to use, eg tagui flow_filename trade_data.csv</p></li>
<li><p>TagUI loops through each row to run automation using the data from different rows</p></li>
<li><p>Using `column_name` in your flow replaces it with the value for that iteration</p></li>
<li><p>Eg, echo ‘TESTCASE - `testname`’ in your flow shows TESTCASE - Trade USDSGD</p></li>
<li><p>echo ‘`[iteration]`’ can be used in your flow to show the current iteration number</p></li>
</ul>
<p>#|testname|username|password|pair|size|direction
:-<a href="#id82"><span class="problematic" id="id83">|:-------|</span></a>:——-<a href="#id84"><span class="problematic" id="id85">|:-------|</span></a>:—<a href="#id86"><span class="problematic" id="id87">|:---|</span></a>:——–
1 <a href="#id41"><span class="problematic" id="id42">|</span></a>Trade USDSGD|test_account|12345678|USDSGD|10000|BUY
2 <a href="#id43"><span class="problematic" id="id44">|</span></a>Trade USDSGD|test_account|12345678|USDJPY|1000|SELL
3 <a href="#id45"><span class="problematic" id="id46">|</span></a>Trade EURUSD|test_account|12345678|EURUSD|100000|BUY</p>
<p><strong>Tip</strong> - use speed option to skip the 3-second delay between iterations (and skip restarting of Chrome browser)</p>
<p>&lt;/details&gt;</p>
<p>### AUDIT &amp; REPORTING
&lt;details&gt;
&lt;summary&gt;</p>
<blockquote>
<div><p>Click to show how the report option can be used to track and store automation results</p>
</div></blockquote>
<p>&lt;/summary&gt;</p>
<ul class="simple">
<li><p>when report option is used, TagUI will track run results to tagui/src/tagui_report.csv</p></li>
<li><p>this can be useful for personal tracking, auditing purpose, or measuring time savings</p></li>
<li><p>html logs will also be generated to store the full execution sequences and outcomes</p></li>
</ul>
<p>#|AUTOMATION FLOW|START TIME|FINISH TIME|ERROR STATUS|LOG FILE
:-<a href="#id88"><span class="problematic" id="id89">|:--------------|</span></a>:———<a href="#id90"><span class="problematic" id="id91">|:----------|</span></a>:———–<a href="#id47"><span class="problematic" id="id48">|</span></a>:——-
1 | /Users/kensoh/Desktop/download_flow | Sun Apr 07 2019 17:33:58 GMT+0800 (+08) | 32.1 | SUCCESS | /Users/kensoh/Desktop/download_flow_1.html
2 | /Users/kensoh/Desktop/upload_flow | NOT STARTED | NOT FINISHED | [LINE 1] cannot understand step self-destruct | /Users/kensoh/Desktop/upload_flow_2.html
3 | /Users/kensoh/Desktop/update_flow | NOT STARTED | NOT FINISHED | [LINE 1] cannot understand step reboot computer | /Users/kensoh/Desktop/update_flow_3.html
4 | /Users/kensoh/Desktop/booking_flow | Sun Apr 07 2019 17:39:00 GMT+0800 (+08) | NOT FINISHED | cannot find confirm_booking | /Users/kensoh/Desktop/booking_flow_4.html</p>
<p>&lt;/details&gt;</p>
<p># Developers Reference
TagUI excels in automating user-interface interactions. It’s designed to make prototyping, deployment and maintenance of UI automation easier by minimizing iteration time for each phase. Originally developed by a frustrated test automation engineer, to maximize automation code output with minimal coding efforts when automating web interactions.</p>
<p>### API</p>
<p>&lt;details&gt;
&lt;summary&gt;</p>
<blockquote>
<div><p>Click to show how to use API webservice that comes with TagUI and how to make complex outgoing API calls</p>
</div></blockquote>
<p>&lt;/summary&gt;</p>
<p>Automation flows can also be triggered via API URL. TagUI has an API service and runner for managing a queue of incoming requests via API (for macOS/Linux). To set up, add a crontab entry on your server with the desired frequency to check and process incoming service requests. Below will check every 15 minutes and run pending flows in the queue. If there’s an automation in progress, TagUI will wait for the next check instead of concurrently starting a new run.
<a href="#id49"><span class="problematic" id="id50">``</span></a><a href="#id51"><span class="problematic" id="id52">`</span></a></p>
<p>0,15,30,45 * * * * /full_path_on_your_server/tagui_crontab</p>
<p><a href="#id53"><span class="problematic" id="id54">``</span></a><a href="#id55"><span class="problematic" id="id56">`</span></a></p>
<p>To call an automation flow from your application or web browser, use below API syntax. Custom input(s) supported. The default folder to look for flow_filename would be in tagui/src folder. Automation flows can also be triggered from emails using the API. For email integration, [check out Tmail](<a class="reference external" href="https://github.com/tebelorg/Tmail">https://github.com/tebelorg/Tmail</a>). It’s an open-source mailbot to act on incoming emails or perform mass emailing; it also delivers emails by API. Emails with run-time variables can be sent directly from your flow with a single line (see flow sample 6C_datatables). For sending SMS, you can use api step to send through SMS-sending services, or host your own from your webserver using services like Skebby ([see this example](<a class="reference external" href="https://github.com/adegard/SMS-Marketing">https://github.com/adegard/SMS-Marketing</a>) from [&#64;adegard](<a class="reference external" href="https://github.com/adegard">https://github.com/adegard</a>)). If you have data transformation in your process pipeline [check out TLE](<a class="reference external" href="https://github.com/tebelorg/TLE">https://github.com/tebelorg/TLE</a>), which can help with converting data.
<a href="#id57"><span class="problematic" id="id58">``</span></a><a href="#id59"><span class="problematic" id="id60">`</span></a></p>
<p>your_website_url/tagui_service.php?SETTINGS=”flow_filename option(s)”</p>
<hr class="docutils" />
<p>Besides integrating with web applications, TagUI can be extended to integrate with hardware (eg Arduino or Raspberry Pi) for physical world interactions or machine learning service providers for AI decision-making ability. Input parameters can be sent to an automation flow to be used as variables p1 to p9. Output parameters from an automation flow can be sent to your Arduino or application API URL (see samples 3_github and 6C_datatables).</p>
<p>For making outgoing API calls in your automation flow, to feed data somewhere or send emails etc, use the api step followed by full URL (including parameters) of the API call. Raw response from API will be saved in <cite>api_result</cite> variable. If the API response is JSON data, the variable <cite>api_json</cite> will be created for easy access to JSON data elements. If not, <cite>api_json</cite> will be null. For example, <cite>api_json.parent_element.child_element</cite> retrieves value of child_element.</p>
<p><code class="docutils literal notranslate"><span class="pre">`js</span>
<span class="pre">api_config</span> <span class="pre">=</span> <span class="pre">{method:'PUT',</span> <span class="pre">header:['Header1:</span> <span class="pre">value1','Header2:</span> <span class="pre">value2'],</span> <span class="pre">body:{'id':123,'pwd':'abc'}};</span>
<span class="pre">``</span></code></p>
<p>For advanced API calls, you can set above api_config variable which defaults as <cite>{method:’GET’, header:[], body:{}}</cite>. Besides GET, you can use other methods such as POST, PUT, DELETE etc. You can define multiple headers in the format <cite>‘Header_name: header_value’</cite> and provide a payload body for PUT requests for example. You can set it as above before using the api step, or set using <cite>api_config.method = ‘PUT’;</cite> and <cite>api_config.header[0] = ‘Header1: value1’;</cite> etc. <cite>api_config.body</cite> will be automatically converted to JSON format for sending to API endpoint.</p>
<p>In addition, macOS/Linux/Windows commands can be executed using run step. This can be used to call other apps or services hosted locally on the OS, instead of being hosted through webservices. To use run step, specify the full command including parameters. Execution result will be stored in <cite>run_result</cite>, which can be used in your flow.</p>
<p>&lt;/details&gt;</p>
<p>### CHROME</p>
<dl>
<dt>&lt;details&gt;</dt><dd><dl class="simple">
<dt>&lt;summary&gt;</dt><dd><p>Click to show how TagUI has native integration with visible and headless Chrome using DevTools Protocol</p>
</dd>
</dl>
<p>&lt;/summary&gt;</p>
<p>TagUI has built-in integration with Chrome web browser to run web automation in visible or headless mode. It uses a websocket connection to directly communicate automation JavaScript code and information to Chrome.</p>
</dd>
</dl>
<p>To develop new custom methods for Chrome integration, see this [TagUI issue](<a class="reference external" href="https://github.com/kelaberetiv/TagUI/issues/24#issuecomment-312361674">https://github.com/kelaberetiv/TagUI/issues/24#issuecomment-312361674</a>) and [tagui_header.js](<a class="reference external" href="https://github.com/kelaberetiv/TagUI/blob/master/src/tagui_header.js">https://github.com/kelaberetiv/TagUI/blob/master/src/tagui_header.js</a>) for examples of websocket calls from TagUI to Chrome (via Chrome DevTools Protocol). The function <cite>chrome_step(method, params)</cite> sends message to Chrome and returns the response. You will see examples from simple websocket calls such as getting webpage title to stacked ones such as handling of frame or popup window. To tweak how TagUI launches / kills Chrome and the integration PHP process, see TagUI runner script for [macOS/Linux](<a class="reference external" href="https://github.com/kelaberetiv/TagUI/blob/master/src/tagui">https://github.com/kelaberetiv/TagUI/blob/master/src/tagui</a>) or [Windows](<a class="reference external" href="https://github.com/kelaberetiv/TagUI/blob/master/src/tagui.cmd">https://github.com/kelaberetiv/TagUI/blob/master/src/tagui.cmd</a>).</p>
<p>Probably the best way to see the websocket communication in action is to enter TagUI live mode (add live step in your automation flow), then <cite>tail -f tagui_chrome.log</cite> in another terminal to see the Chrome DevTools Protocol messages going to and fro as you enter TagUI steps or JavaScript code. If you are running on Windows, you can click on the PHP process window directly to see the messages.</p>
<p>At run-time TagUI will start a PHP thread in the background to manage the integration with Chrome for concurrent communication. The [Textalk PHP websocket](<a class="reference external" href="https://github.com/Textalk/websocket-php">https://github.com/Textalk/websocket-php</a>) is used as it’s super-light and most importantly, it works even without any update for 2 years. The normal approach to integrate with Chrome is through [chrome-remote-interface](<a class="reference external" href="https://github.com/cyrus-and/chrome-remote-interface">https://github.com/cyrus-and/chrome-remote-interface</a>) project or tools such as [Puppeteer](<a class="reference external" href="https://github.com/GoogleChrome/puppeteer">https://github.com/GoogleChrome/puppeteer</a>) and [friends](<a class="reference external" href="https://medium.com/&#64;kensoh/chromeless-chrominator-chromy-navalia-lambdium-ghostjs-autogcd-ef34bcd26907">https://medium.com/&#64;kensoh/chromeless-chrominator-chromy-navalia-lambdium-ghostjs-autogcd-ef34bcd26907</a>). However, that approach introduces Node.js dependency which means users without a Node.js development environment cannot run TagUI with Chrome.</p>
<p>In order to retain TagUI unzip and run functionality, the approach of launching a [separate PHP thread](<a class="reference external" href="https://github.com/kelaberetiv/TagUI/blob/master/src/tagui_chrome.php">https://github.com/kelaberetiv/TagUI/blob/master/src/tagui_chrome.php</a>) is chosen. Since the TagUI [natural language interpreter](<a class="reference external" href="https://github.com/kelaberetiv/TagUI/blob/master/src/tagui_parse.php">https://github.com/kelaberetiv/TagUI/blob/master/src/tagui_parse.php</a>) is already written in PHP, there is no new dependency. Also, doing websocket communication within the single-threaded JavaScript environment used by CasperJS is not possible as it involves a redesign of fundamental CasperJS methods such as casper.exists to support async/await or use JavaScript promises which are not yet supported by CasperJS (for compatibility with latest PhantomJS).</p>
<p>Like chrome-remote-interface, TagUI communicates with Chrome through [Chrome DevTools Protocol](<a class="reference external" href="https://chromedevtools.github.io/devtools-protocol/">https://chromedevtools.github.io/devtools-protocol/</a>). The protocol is primarily designed for debugging the web browser instead of web automation, so many methods are still in experimental status. However, the API is stable enough for TagUI steps to work with Chrome. When chrome or headless option is used, TagUI replaces CasperJS methods it uses with custom methods to talk to Chrome instead of PhantomJS. When firefox option is used or by default, TagUI doesn’t invoke custom methods and PHP process.</p>
<p>&lt;/details&gt;</p>
<p>### TESTING</p>
<dl>
<dt>&lt;details&gt;</dt><dd><dl class="simple">
<dt>&lt;summary&gt;</dt><dd><p>Click to show details of how TagUI can be used for test automation with integration to CI tools</p>
</dd>
</dl>
<p>&lt;/summary&gt;</p>
<p>The check step allows easy testing of conditions. When the test option is used, test assertions are automatically performed for check steps. This lets CasperJS framework output a XUnit XML file, which can be used for CI/CD integration with tools such as Jenkins. Below are examples of check steps, more examples in [sample flow 7_testing](<a class="reference external" href="https://github.com/kelaberetiv/TagUI/blob/master/src/samples/7_testing">https://github.com/kelaberetiv/TagUI/blob/master/src/samples/7_testing</a>).</p>
</dd>
</dl>
<p><a href="#id61"><span class="problematic" id="id62">``</span></a>`
// check whether the element search-buttons exists
check present(‘search-buttons’) | ‘search button exists’ | ‘search button does not exist’</p>
<p>// check whether the search button text is correct
read search-buttons to button
check button equals to ‘Search’ | ‘search button text is correct - ‘ button | ‘search button text is wrong - ‘ button</p>
<p>// check that the page has the text My Portfolio
check text() contains ‘My Portfolio’ | ‘page text contains My Portfolio’ | ‘page text does not contain My Portfolio’</p>
<p>// check that number of header menu items are more than or equals to 6
check count(‘uh-tb-‘) more than or equals to 6 | ‘header menu items &gt;= 6’ | ‘header menu items &lt; 6’
<a href="#id63"><span class="problematic" id="id64">``</span></a><a href="#id65"><span class="problematic" id="id66">`</span></a></p>
<p>CasperJS test scripts are inherently different in structure and syntax from its usual automation scripts. With the test option, TagUI automatically sets up your automation flow to work as a test script. TagUI allows you to reuse the same flow for testing or automation by running it with or without the test option. [More info](<a class="reference external" href="http://docs.casperjs.org/en/latest/testing.html">http://docs.casperjs.org/en/latest/testing.html</a>) about CasperJS testing framework.</p>
<p>Note that CasperJS is not yet supporting Chrome, below additional examples using CasperJS [built-in test assertions](<a class="reference external" href="http://docs.casperjs.org/en/latest/modules/tester.html">http://docs.casperjs.org/en/latest/modules/tester.html</a>) won’t work when chrome or headless option is used. TagUI smart selector can still be accessed using tx(‘selector’). As TagUI allows you to write JavaScript / CasperJS code directly within the automation flow, advanced testing or coding techniques that can be implemented in CasperJS should work directly within your flow.</p>
<p><a href="#id67"><span class="problematic" id="id68">``</span></a><a href="#id69"><span class="problematic" id="id70">`</span></a>js
test.assertTextExists(‘ABOUT’, ‘Check for ABOUT text’)
test.assertSelectorHasText(</p>
<blockquote>
<div><p>tx(‘header’),
‘Interface automation’,
‘Check for phrase in header element’</p>
</div></blockquote>
<div class="section" id="id71">
<h3>)<a class="headerlink" href="#id71" title="Permalink to this headline">¶</a></h3>
<p>In the event you get an error saying that it cannot understand the step for your JavaScript line, raise an issue or modify the source code ([tagui_parse.php](<a class="reference external" href="https://github.com/kelaberetiv/TagUI/blob/master/src/tagui_parse.php">https://github.com/kelaberetiv/TagUI/blob/master/src/tagui_parse.php</a>) is where interpretation of natural language to CasperJS JavaScript code takes place). Alternatively, use step js to explicitly declare that whatever follows on that line is JavaScript code and ensure that the line is not treated as a TagUI step.</p>
<p>&lt;/details&gt;</p>
<p>### FILES</p>
<dl>
<dt>&lt;details&gt;</dt><dd><dl class="simple">
<dt>&lt;summary&gt;</dt><dd><p>Click to show details of the different files used by TagUI and their purposes</p>
</dd>
</dl>
<p>&lt;/summary&gt;</p>
<p>Core Files|Purpose
:———<a href="#id92"><span class="problematic" id="id93">|:------
tagui|main runner for TagUI automation
tagui.cmd|main runner for Windows platform
tagui_config.txt|web browser settings used for automation
tagui_parse.php|to interpret natural language into code
tagui_header.js|template for CasperJS / integrations code
tagui_footer.js|template for CasperJS / integrations code
test/positive_test|TagUI's interpretation positive test cases
test/positive_test.signature|</span></a>.js signature for positive test cases</p>
</dd>
</dl>
<div class="line-block">
<div class="line">Multi-Language      | Purpose                                   |</div>
<div class="line">:—————— | :—————————————- |</div>
<div class="line">translate.php       | translation engine for native languages   |</div>
<div class="line">translate.log       | translation in English reference language |</div>
<div class="line">languages/build     | script to self-build language definitions |</div>
<div class="line">languages/build.csv | default languages to be self-built        |</div>
</div>
<div class="line-block">
<div class="line">Chrome Integration | Purpose                                   |</div>
<div class="line">:—————– | :—————————————- |</div>
<div class="line">tagui_chrome.php   | PHP thread for Chrome integration         |</div>
<div class="line">tagui_chrome.log   | log for Chrome websocket transactions     |</div>
<div class="line">tagui_chrome.in    | interface in-file for Chrome integration  |</div>
<div class="line">tagui_chrome.out   | interface out-file for Chrome integration |</div>
</div>
<div class="line-block">
<div class="line">SikuliX Integration | Purpose                                    |</div>
<div class="line">:—————— | :—————————————– |</div>
<div class="line">tagui.py            | interface for SikuliX visual automation    |</div>
<div class="line">tagui.log           | log for SikuliX Python transactions        |</div>
<div class="line">tagui_windows.log   | same as above but for Windows              |</div>
<div class="line">tagui_sikuli.in     | interface in-file for SikuliX integration  |</div>
<div class="line">tagui_sikuli.out    | interface out-file for SikuliX integration |</div>
<div class="line">tagui_sikuli.txt    | Tesseract OCR integration interface file   |</div>
</div>
<div class="line-block">
<div class="line">Python Integration   | Purpose                                   |</div>
<div class="line">:——————- | :—————————————- |</div>
<div class="line">tagui_py.py          | interface for Python integration          |</div>
<div class="line">tagui_py.log         | log for Python platform transactions      |</div>
<div class="line">tagui_py_windows.log | same as above but for Windows             |</div>
<div class="line">tagui_py.in          | interface in-file for Python integration  |</div>
<div class="line">tagui_py.out         | interface out-file for Python integration |</div>
<div class="line">tagui_py.txt         | integration file for storing output       |</div>
</div>
<div class="line-block">
<div class="line">R Integration       | Purpose                              |</div>
<div class="line">:—————— | :———————————– |</div>
<div class="line">tagui_r.R           | interface for R integration          |</div>
<div class="line">tagui_r.log         | log for R platform transactions      |</div>
<div class="line">tagui_r_windows.log | same as above but for Windows        |</div>
<div class="line">tagui_r.in          | interface in-file for R integration  |</div>
<div class="line">tagui_r.out         | interface out-file for R integration |</div>
<div class="line">tagui_r.txt         | integration file for storing output  |</div>
</div>
<div class="line-block">
<div class="line">API Service        | Purpose                                   |</div>
<div class="line">:—————– | :—————————————- |</div>
<div class="line">tagui_crontab      | to run service request batch from crontab |</div>
<div class="line">tagui_runner.php   | retrieving service requests from queue    |</div>
<div class="line">tagui_service.php  | receiving service requests into queue     |</div>
<div class="line">tagui_service.log  | log to track service requests history     |</div>
<div class="line">tagui_service.in   | log to track incoming service requests    |</div>
<div class="line">tagui_service.out  | log to track processed service requests   |</div>
<div class="line">tagui_service.act  | service request batch ready to execute    |</div>
<div class="line">tagui_service.run  | service request batch currently running   |</div>
<div class="line">tagui_service.done | service request batch finished running    |</div>
</div>
<div class="line-block">
<div class="line">CLI Assistant    | Purpose                                |</div>
<div class="line">:————— | :————————————- |</div>
<div class="line">erina            | natural language command line helper   |</div>
<div class="line">erina.cmd        | same as above but for Windows platform |</div>
<div class="line">tagui_helper.php | command line natural language parser   |</div>
<div class="line">tagui_helper     | generated normal TagUI command to run  |</div>
<div class="line">tagui_helper.cmd | same as above but for Windows platform |</div>
</div>
<div class="line-block">
<div class="line">Miscellaneous Files | Purpose                                      |</div>
<div class="line">:—————— | :——————————————- |</div>
<div class="line">end_processes       | kill all processes of TagUI and integrations |</div>
<div class="line">end_processes.cmd   | same as above but for Windows platform       |</div>
<div class="line">tagui_datatable.csv | temporary datatable internal representation  |</div>
<div class="line">transpose.php       | transpose conventional datatable csv file    |</div>
<div class="line">tagui_report.php    | to track run results and keep html logs      |</div>
<div class="line">tagui_report.csv    | run results tracked using report option      |</div>
<div class="line">sleep.php           | allow adding execution pause on Windows      |</div>
</div>
<div class="line-block">
<div class="line">User-defined Files | Purpose                                       |</div>
<div class="line">:—————– | :——————————————– |</div>
<div class="line">tagui_local.csv    | local repository (put in same folder as flow) |</div>
<div class="line">tagui_global.csv   | global repository (put in tagui/src folder)   |</div>
<div class="line">tagui_local.js     | local functions (put in same folder as flow)  |</div>
<div class="line">tagui_global.js    | global functions (put in tagui/src folder)    |</div>
</div>
<p>&lt;/details&gt;</p>
<p>### SECURITY</p>
<dl>
<dt>&lt;details&gt;</dt><dd><dl class="simple">
<dt>&lt;summary&gt;</dt><dd><p>Click to show details of security concerns and features of TagUI</p>
</dd>
</dl>
<p>&lt;/summary&gt;</p>
</dd>
</dl>
<p>Below architecture diagram for TagUI will be used to elaborate on the topic of security -</p>
<p>![TagUI Flowchart](<a class="reference external" href="https://raw.githubusercontent.com/kelaberetiv/TagUI/master/src/media/flowchart.png">https://raw.githubusercontent.com/kelaberetiv/TagUI/master/src/media/flowchart.png</a>)</p>
<p>As TagUI and the foundation it’s built on is open-source software, it means users can read the source code of TagUI and all its dependencies to check if there is a security flaw or malicious code. This is an advantage compared to using commercial software that is closed-source, as users cannot see what is the code behind the software.</p>
<p>Following are links to the source code for TagUI and its open-source dependencies. You can dig through the source code for the other open-source dependencies below, or make the fair assumption that security issues would have been spotted by users and fixed, as these projects are mature and have large user bases.</p>
<ul class="simple">
<li><p>TagUI - <a class="reference external" href="https://github.com/kelaberetiv/TagUI">https://github.com/kelaberetiv/TagUI</a></p></li>
<li><p>SikuliX - <a class="reference external" href="https://github.com/RaiMan/SikuliX1">https://github.com/RaiMan/SikuliX1</a></p></li>
<li><p>CasperJS - <a class="reference external" href="https://github.com/casperjs/casperjs">https://github.com/casperjs/casperjs</a></p></li>
<li><p>PhantomJS - <a class="reference external" href="https://github.com/ariya/phantomjs">https://github.com/ariya/phantomjs</a></p></li>
<li><p>SlimerJS - <a class="reference external" href="https://github.com/laurentj/slimerjs">https://github.com/laurentj/slimerjs</a></p></li>
<li><p>Python - <a class="reference external" href="https://github.com/python/cpython">https://github.com/python/cpython</a></p></li>
<li><p>R - <a class="reference external" href="https://github.com/wch/r-source">https://github.com/wch/r-source</a></p></li>
<li><p>PHP - <a class="reference external" href="https://github.com/php/php-src">https://github.com/php/php-src</a></p></li>
</ul>
<p>Following are more comments specific to TagUI for the topic of security -</p>
<ul class="simple">
<li><p>By design, TagUI does not send outgoing web traffic or send outgoing data, other than what the user is automating on, for example visiting a website. However, there is an upload option (off by default) when used, TagUI will go to an [open-source service Hastebin](<a class="reference external" href="https://hastebin.com/about.md">https://hastebin.com/about.md</a>) that allows uploading of information to share via URL. This sends outgoing data of the automation execution log to that website and returns an URL to user so that user can easily share the output of the automation with colleagues or friends.</p></li>
<li><p>TagUI allows running of automation files whether they are stored locally as a file on your laptop or computer, [or if the file is an online URL](<a class="reference external" href="https://github.com/kelaberetiv/TagUI#command-line">https://github.com/kelaberetiv/TagUI#command-line</a>). This means users should be cautious to run automation from online URLs unless they are sure that the online URL is a safe source and not doing something destructive. This can be checked by accessing the URL using a web-browser to see the automation steps performed in the online automation file.</p></li>
<li><p>TagUI comes with a web service, that can be used to trigger automation flows if TagUI is installed on a web-server. More details in [Developers Reference section under API](<a class="reference external" href="https://github.com/kelaberetiv/TagUI#api">https://github.com/kelaberetiv/TagUI#api</a>). The design minimizes security risk by not forcing users to turn on exec() for their PHP configuration. This means execution of malicious commands cannot be injected through the web-service. Instead, the web-service works by using crontab to periodically check for automation requests. Webservice execution of online flows is now disabled by default so that malicious users cannot trigger execution of a malicious flow hosted online on the webserver.</p></li>
<li><p>TagUI has [very powerful features](<a class="reference external" href="https://github.com/kelaberetiv/TagUI#steps-description">https://github.com/kelaberetiv/TagUI#steps-description</a>), including the ability to run command line programs, Python code, R code, API calls, and ability to make changes to the local file systems. These features can become security risks if a malicious automation flow file is executed. Imagine TagUI as a tool, such as fire. In evil hands it can be used to do evil things at scale. In good hands, it can be used to solve pain points related to processes that are repetitive and huge in volume.</p></li>
<li><p>As TagUI can replicate what a normal human user can do on the computer, TagUI is restricted and compliant to the same security policies as the normal human user would be subjected to. For example, having to use a hardware token in order to access the laptop, or user password in order to login to the computer. Or having a 2FA hardware token in order to access confidential information from a web or enterprise application.</p></li>
</ul>
<p>&lt;/details&gt;</p>
<p># Credits</p>
<ul class="simple">
<li><p>[TagUI](<a class="reference external" href="https://github.com/kelaberetiv/TagUI">https://github.com/kelaberetiv/TagUI</a>) - Ken Soh from Singapore / [&#64;kensoh](<a class="reference external" href="https://github.com/kensoh">https://github.com/kensoh</a>)</p></li>
<li><p>[SikuliX](<a class="reference external" href="http://sikulix.com">http://sikulix.com</a>) - Raimund Hocke from Germany / [&#64;RaiMan](<a class="reference external" href="https://github.com/RaiMan">https://github.com/RaiMan</a>)</p></li>
<li><p>[CasperJS](<a class="reference external" href="http://casperjs.org">http://casperjs.org</a>) - Nicolas Perriault from France / [&#64;n1k0](<a class="reference external" href="https://github.com/n1k0">https://github.com/n1k0</a>)</p></li>
<li><p>[PhantomJS](<a class="reference external" href="http://phantomjs.org">http://phantomjs.org</a>) - Ariya Hidayat from Indonesia / [&#64;ariya](<a class="reference external" href="https://github.com/ariya">https://github.com/ariya</a>)</p></li>
<li><p>[SlimerJS](<a class="reference external" href="https://slimerjs.org">https://slimerjs.org</a>) - Laurent Jouanneau from France / [&#64;laurentj](<a class="reference external" href="https://github.com/laurentj">https://github.com/laurentj</a>)</p></li>
</ul>
<p># License</p>
<p>TagUI is open-source software released under Apache 2.0 license</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tools.html" class="btn btn-neutral float-right" title="TagUI Chrome Extension" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="setup.html" class="btn btn-neutral float-left" title="Download and Setup" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Ken Soh, Siow Yi Sheng

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>